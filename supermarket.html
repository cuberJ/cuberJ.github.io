<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>è¿é”è¶…å¸‚ Â· æ¨¡æ‹Ÿæµè§ˆå™¨è´­ç‰©ä¸»é¡µ</title>
  <style>
    /* é¢œè‰²ï¼šç™½/çº¢/æ·¡ç°/é»‘ */
    :root {
      --red: #e53935;
      --red-dark: #c62828;
      --white: #fff;
      --light: #f5f6f7;
      --gray: #ddd;
      --text: #222;
      --muted: #666;
      --green: #27c93f; /* é€‰é¡¹æ éšè—æŒ‰é’®è‰² */
      --yellow: #ffbd2e; /* ç¼©å° */
      --close: #ff5f56; /* å…³é—­ */
    }
    *{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--light);color:var(--text);font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans',Arial,'PingFang SC','Microsoft YaHei',sans-serif}
    .wrap{max-width:1000px;margin:24px auto;border:1px solid var(--gray);border-radius:12px;overflow:hidden;background:var(--white)}
    header{background:#000;color:#fff;padding:12px 16px}
    /* é¡¶éƒ¨æµè§ˆå™¨æ¡†æ¶ */
    .top{background:#000;color:#fff;padding:8px 12px;border-bottom:1px solid #111}
    .top .row{display:flex;align-items:center;gap:12px}
    .controls{display:flex;gap:8px}
    .dot{width:12px;height:12px;border-radius:50%}
    .dot.close{background:var(--close)}
    .dot.min{background:var(--yellow)}
    .dot.hide{background:var(--green)}
    .tabbar{display:flex;gap:8px;margin-left:auto}
    .tab{padding:6px 10px;border-radius:8px;background:#222;color:#fff;border:1px solid #333;cursor:pointer}
    .tab.active{background:var(--red);border-color:var(--red-dark)}
    .urlbar{margin-top:8px}
    .urlbar input{width:100%;padding:10px 12px;border:1px solid var(--gray);border-radius:8px;background:#fff;color:#111}
    .options{background:#111;color:#bbb;padding:6px 12px;font-size:13px;border-top:1px solid #222}
    .options.hidden{display:none}

    /* å®£ä¼ è½®æ’­ */
    .promo{position:relative;overflow:hidden;border-bottom:1px solid var(--gray)}
    .slides{display:flex;width:300%;transition:transform .5s ease}
    .slide{flex:0 0 100%;height:220px;display:flex;align-items:center;justify-content:center;font-size:28px;font-weight:700;color:#fff}
    .s1{background-image:url('picture/è¶…å¸‚å®£ä¼ å›¾1.png');background-size:auto 100%;}
    .s2{background-image:url('picture/è¶…å¸‚å®£ä¼ å›¾2.png');background-size:auto 100%;}
    .s3{background:linear-gradient(135deg,#f48fb1,#ad1457)}
    .arrows{position:absolute;inset:0;display:flex;justify-content:space-between;align-items:center;padding:0 8px}
    .arrow{background:rgba(0,0,0,.35);color:#fff;border:none;border-radius:6px;font-size:20px;width:36px;height:36px;cursor:pointer}
    .dots{position:absolute;left:50%;bottom:10px;transform:translateX(-50%);display:flex;gap:6px}
    .dotp{width:8px;height:8px;border-radius:50%;background:#fff;opacity:.6}
    .dotp.active{opacity:1;background:#000}

    /* å¯¼èˆªæ  */
    nav.menu{display:flex;gap:16px;padding:12px 16px;border-bottom:1px solid var(--gray);background:#fafafa}
    nav.menu a{color:var(--red-dark);text-decoration:none;font-weight:700;padding:8px 12px;border:1px solid var(--gray);border-radius:8px;background:#fff;box-shadow:0 2px 6px rgba(0,0,0,.06)}
    nav.menu a:hover{background:var(--red);color:#fff;border-color:var(--red-dark)}

    /* å†…å®¹åˆ†åŒºå¡ç‰‡ */
    .card{padding:16px;border-bottom:1px solid var(--gray)}
    .card h3{margin:0 0 8px;color:var(--red-dark)}
    .muted{color:var(--muted);font-size:14px}

    /* è´­ç‰©åŒº */
    .shop{padding:16px}
    .grid{display:grid;grid-template-columns:repeat(4,1fr);gap:16px}
    @media (max-width:900px){.grid{grid-template-columns:repeat(2,1fr)}}
    @media (max-width:520px){.grid{grid-template-columns:1fr}}
    .item{border:1px solid var(--gray);border-radius:10px;background:#fff;display:flex;flex-direction:column}
    .pic{height:110px;display:flex;align-items:center;justify-content:center;font-size:40px;background:#f9f9f9;border-bottom:1px solid var(--gray)}
    .info{padding:10px 12px}
    .name{font-weight:600}
    .price{color:#000}
    .actions{display:flex;align-items:center;gap:8px;padding:10px 12px;border-top:1px solid var(--gray)}
    .btn{padding:6px 10px;border:1px solid var(--gray);border-radius:6px;background:#fff;cursor:pointer}
    .btn.add{background:var(--red);border-color:var(--red-dark);color:#fff}
    .qty{margin-left:auto;font-weight:700}
    .added{padding:8px 12px;border-top:1px dashed var(--gray);background:#fafafa;color:#333}

    /* ç»“ç®—åŒº */
    .checkout{display:flex;align-items:center;gap:12px;padding:16px;border-top:2px solid var(--gray);background:#fafafa}
    .total{font-size:18px;font-weight:700}
    .pay{margin-left:auto;background:#000;color:#fff;border:none;border-radius:8px;padding:10px 16px;cursor:pointer}
    .pay:disabled{opacity:.5;cursor:not-allowed}

    /* åº•éƒ¨çŠ¶æ€æ  */
    .status{display:flex;gap:18px;align-items:center;padding:10px 16px;border-top:1px solid var(--gray);background:#f0f0f0}
    .status a{color:#111;text-decoration:none}
    .status .mail .has{display:none}
    body[data-has-mail="true"] .status .mail .has{display:inline}
    body[data-has-mail="true"] .status .mail .none{display:none}
  </style>
  <link rel="stylesheet" href="css/taskbar.css" />
  <link rel="stylesheet" href="css/chrome.css" />
</head>
<body data-page-index="6/36">
  <div class="wrap">
    <header>è¿é”è¶…å¸‚</header>
    <main>
      <!-- å®£ä¼ æ ï¼ˆè½®æ’­ï¼‰ -->
      <section class="promo" id="top">
        <div class="slides" id="slides">
          <div class="slide s1">å…¨åŸç‹‚æ¬¢ Â· çº¢è‰²å¤§ä¿ƒ</div>
          <div class="slide s2">ä¼šå‘˜æ—¥ Â· æ»¡å‡ä¸åœ</div>
          <div class="slide s3">ç”Ÿé²œåˆ°å®¶ Â· å½“æ—¥è¾¾</div>
        </div>
        <div class="arrows">
          <button class="arrow" id="prev">â€¹</button>
          <button class="arrow" id="next">â€º</button>
        </div>
        <div class="dots" id="dots"></div>
      </section>

      <!-- å¯¼èˆªæ  -->
      <nav class="menu">
        <a href="about.html">è¶…å¸‚ç®€ä»‹</a>
        <a href="deals.html">ä»Šæ—¥ç‰¹ä»·</a>
        <a href="macellum.html">å…¬å‘Šæ </a>
      </nav>

      <!-- è´­ç‰©åŒº -->
      <section class="shop">
        <h3 style="margin:0 0 10px;color:var(--red-dark)">è´­ç‰©åŒº</h3>
        <div class="grid" id="products"></div>
      </section>

      <!-- ç»“ç®—åŒº -->
      <section class="checkout">
        <div class="total">ç´¯è®¡é‡‘é¢ï¼š<span id="total">Â¥0.00</span></div>
        <button class="pay" id="checkout">ç»“ç®—</button>
      </section>
    </main>
  </div>

  <script>
    // åˆå§‹åŒ–é‚®ä»¶å›¾æ ‡çŠ¶æ€
    function applyMailIcon(){
      const has = localStorage.getItem('hasMail') === 'true';
      document.body.dataset.hasMail = has ? 'true' : 'false';
    }
    applyMailIcon();

    // å·²ç§»é™¤æœ¬åœ°çª—å£æ§åˆ¶ï¼Œç»Ÿä¸€ä½¿ç”¨å…¨å±€æµè§ˆå™¨æ ï¼ˆchrome.jsï¼‰



    // è½®æ’­é€»è¾‘
    const slides = document.getElementById('slides');
    const dotBox = document.getElementById('dots');
    let idx = 0; const totalSlides = 3;
    for(let i=0;i<totalSlides;i++){ const d=document.createElement('div'); d.className='dotp'+(i===0?' active':''); dotBox.appendChild(d); }
    function updateDots(){
      [...dotBox.children].forEach((d,i)=>{ d.classList.toggle('active', i===idx); });
    }
    function go(n){ idx=(n+totalSlides)%totalSlides; slides.style.transform=`translateX(-${idx*100}%)`; updateDots(); }
    document.getElementById('prev').onclick=()=>go(idx-1);
    document.getElementById('next').onclick=()=>go(idx+1);
    setInterval(()=>go(idx+1), 3500);

    // å•†å“ä¸è´­ç‰©è½¦
    const items=[
      {id:'apple',name:'è‹¹æœ',price:3.5,emoji:'ğŸ¥”'},
      {id:'milk',name:'ç‰›å¥¶',price:5.0,emoji:'ğŸ¥›'},
      {id:'bread',name:'é¢åŒ…',price:4.0,emoji:'ğŸ'},
      {id:'egg',name:'é¸¡è›‹',price:0.8,emoji:'ğŸ¥š'},
      {id:'coffee',name:'å’–å•¡',price:12.0,emoji:'â˜•'},
      {id:'detergent',name:'æ´—è¡£æ¶²',price:25.0,emoji:'ğŸ§´'},
      {id:'tissue',name:'çº¸å·¾',price:8.9,emoji:'ğŸ§»'},
      {id:'toothpaste',name:'ç‰™è†',price:14.5,emoji:'ğŸª¥'}
    ];
    const cart={};
    const products=document.getElementById('products');
    const totalEl=document.getElementById('total');
    function render(){
      products.innerHTML='';
      items.forEach(it=>{
        const card=document.createElement('div'); card.className='item';
        card.innerHTML=`
          <div class='pic'>${it.emoji}</div>
          <div class='info'><div class='name'>${it.name}</div><div class='price'>Â¥${it.price.toFixed(2)}</div></div>
          <div class='actions'>
            <button class='btn del' aria-label='åˆ é™¤'>åˆ é™¤</button>
            <button class='btn add' aria-label='æ·»åŠ '>æ·»åŠ </button>
            <div class='qty'>æ•°é‡ï¼š<span>0</span></div>
          </div>
          <div class='added'>å·²æ·»åŠ ï¼š<span class='added-count'>0</span> ä»¶</div>`;
        const qtyEl=card.querySelector('.qty span');
         const addedEl=card.querySelector('.added-count');
         function updateQty(n){
           cart[it.id]=Math.max(0, Math.min(10, (cart[it.id]||0)+n));
           qtyEl.textContent=cart[it.id];
           if(addedEl) addedEl.textContent=cart[it.id];
           updateTotal();
         }
        card.querySelector('.add').addEventListener('click',()=>{ const q=cart[it.id]||0; if(q>=10){alert('æ¯æ ·ç‰©å“æœ€å¤šè´­ä¹° 10 ä»¶');} updateQty(+1); });
        card.querySelector('.del').addEventListener('click',()=>updateQty(-1));
        products.appendChild(card);
      });
    }
    function updateTotal(){
      let total=0; items.forEach(it=>{ const q=cart[it.id]||0; total+=q*it.price; });
      totalEl.textContent='Â¥'+total.toFixed(2);
      document.getElementById('checkout').disabled = total<=0;
    }
    render(); updateTotal();

    // ç»“ç®—
    document.getElementById('checkout').addEventListener('click',()=>{
      const selected = items.filter(it=> (cart[it.id]||0) > 0);
      let lines = selected.map(it=>`${it.name} x${cart[it.id]} = Â¥${(it.price*cart[it.id]).toFixed(2)}`);
      let msg = (lines.length? lines.join('\n')+'\n':'') + `æ€»è®¡ï¼š${totalEl.textContent}`;
      const onlyThree = (cart['apple']===1) && (cart['bread']===1) && (cart['toothpaste']===1) && selected.length===3;
      if(onlyThree){
        msg += '\nä¸´æ—¶äº¤æ˜“å¸‚åœºé“¾æ¥å…³é”®å­—ï¼šã€å…½çš„ä¸´æ—¶äº¤æ˜“å¸‚åœºã€‘';
      }
      alert(msg);
    });
  </script>
  <script src="js/chrome.js" defer></script>
  <script src="js/taskbar.js" defer></script>
</body>
</html>