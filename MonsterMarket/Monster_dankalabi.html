<!doctype html>
<html lang="zh-CN">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Monster · Dankalabi</title>
<style>
  :root{
    /* 统一为 MonsterForum 的深蓝背景与霓虹黄蓝强调 */
    --bg-start:#0c1f3f;
    --bg-end:#0b5a6a;
    --accent:#ffeb3b;
    --accent-2:#6ae8ff;
    --text:#eaf7ff;
    --muted:#9dbbd3;
    --card-bg:rgba(10,21,40,.72);
    --card-border:rgba(255,255,255,.18);
  }
  *{box-sizing:border-box}
  body{margin:0;font-family:-apple-system,BlinkMacSystemFont,'Segoe UI',Roboto,'Noto Sans',Arial,'PingFang SC','Microsoft YaHei',sans-serif;background:linear-gradient(135deg,var(--bg-start),var(--bg-end));color:var(--text)}
  .wrap{max-width:1100px;margin:24px auto;border:1px solid var(--card-border);border-radius:16px;overflow:visible;background:rgba(8,16,30,.55);backdrop-filter:blur(6px)}
  header{padding:12px 16px;border-bottom:1px solid var(--card-border);color:#fff}
  main{padding:16px}
  .title{font-size:28px;font-weight:800;letter-spacing:1px;color:var(--accent);margin:0 0 12px;text-shadow:0 2px 8px rgba(0,0,0,.35)}
  .intro{border:1px solid var(--card-border);border-radius:12px;background:var(--card-bg);padding:12px;color:#ffead1;line-height:1.8}
  .link-input{margin-top:14px;border:1px solid var(--card-border);border-radius:12px;background:rgba(255,210,120,.10);padding:12px}
  .link-input h3{margin:0 0 8px;color:#fff}
  .link-input form{display:flex;gap:10px}
  .link-input input{flex:1;padding:10px 12px;border:1px solid var(--card-border);border-radius:10px;background:#fff;color:#240b0b}
  .link-input button{padding:10px 12px;border:1px solid #f7c54b;border-radius:10px;background:var(--accent);color:#2d0a0a;cursor:pointer}
  .link-input button:hover{background:var(--accent-2)}

  /* 弹窗 */
  .modal{position:fixed;inset:0;background:rgba(0,0,0,.6);display:none;align-items:center;justify-content:center;z-index:9999;overflow:auto;padding:16px}
  .modal.show{display:flex}
  .modal .box{width:min(92vw,720px);max-height:86vh;overflow:auto;border:1px solid var(--card-border);border-radius:14px;background:rgba(30,8,8,.88);color:#fff;box-shadow:0 10px 26px rgba(0,0,0,.45)}
  .modal .inner{padding:14px}
  .modal .image{display:flex;justify-content:center;align-items:center}
  .modal .image img{max-width:100%;max-height:50vh;height:auto;object-fit:contain;border-radius:10px;border:1px solid var(--card-border);background:#120606}
  .modal .text{margin-top:12px;text-align:center;color:#ffead1;line-height:1.8}
  .modal .actions{display:flex;justify-content:flex-end;margin-top:10px;gap:8px}
  .modal .goto{padding:8px 12px;border:1px solid #f7c54b;border-radius:8px;background:var(--accent);color:#2d0a0a;cursor:pointer}
  .modal .close{padding:8px 12px;border:1px solid #f7c54b;border-radius:8px;background:var(--accent);color:#2d0a0a;cursor:pointer}
</style>
<link rel="stylesheet" href="../css/taskbar.css" />
<link rel="stylesheet" href="../css/chrome.css" />
</head>
<body data-page-index="31/36">
<div class="wrap">
  <header>怪物 · 丹卡拉比</header>
  <main>
    <div class="title">丹卡拉比的召唤仪式</div>
    <section class="intro" aria-label="文字介绍">
      卖方提供经过可控的丹卡拉比的力量。借助丹卡拉比对回忆的提取能力，您可以从一些新闻中获取有用的信息或者物资。
    </section>

    <section class="link-input" aria-label="网页链接输入区">
      <h3>输入新闻编号，Doi-xxxxxx</h3>
      <form id="linkForm" novalidate>
        <input id="linkInput" type="text" placeholder="例如：Doi-xxxx" aria-label="搜索内容" />
        <button type="submit" title="提取">提取</button>
      </form>
      <p style="color:#ffead1;margin:8px 0 0"></p>
    </section>

    <!-- 弹窗：图片 + 居中文案 -->
    <div class="modal" id="modal" aria-hidden="true">
      <div class="box" role="dialog" aria-modal="true" aria-label="提示框">
        <div class="inner">
          <div class="image"><img id="modal-image" src="picture/logo.png" alt="提示配图" /></div>
          <div class="text" id="modal-text">这里将显示与链接对应的说明文字。</div>
          <div class="actions">
            <button class="goto" id="modal-goto" type="button" style="display:none">跳转查看</button>
            <button class="close" id="modal-close" type="button">关闭</button>
          </div>
        </div>
      </div>
    </div>
  </main>
</div>
<script>
(function(){
  const form=document.getElementById('linkForm');
  const input=document.getElementById('linkInput');
  const modal=document.getElementById('modal');
  const img=document.getElementById('modal-image');
  const text=document.getElementById('modal-text');
  const closeBtn=document.getElementById('modal-close');
  const gotoBtn=document.getElementById('modal-goto');

  function pickContent(v){
    const raw=(v||'').trim();
    const s=raw;
    
    if(s.includes('DOI-F423E1')){
      return {src:'../picture/时间结晶.png', msg:'回忆·时间的结晶', ok:true, target:'../photoIntroduction/photo_time.html'};
    }
    if(s.includes('DOI-C9713W')){
      return {src:'../picture/游戏时光.png', msg:'回忆·快乐时光', ok:true, target:'../photoIntroduction/photo_happy.html'};
    }
    if(s.includes('DOI-GF0324')){
      return {src:'../picture/折纸小狗.png', msg:'回忆·看不见的朋友', ok:true, target:'../photoIntroduction/photo_disappear.html'};
    }
    if(s.includes('DOI-AMY089')){
      return {src:'../picture/猫眼石.png', msg:'回忆·名贵钻石', ok:true, target:'../photoIntroduction/photo_diamond.html'};
    }
    if(s.includes('NDOI-746I8H')){
      return {src:'../picture/宣传海报.png', msg:'回忆·支持者的斗争', ok:true, target:'../photoIntroduction/photo_persuit.html'};
    }
    const failMsg = '未识别的新闻编号，请检查输入内容。';
    return {src:'picture/监控画面内容.png', msg:failMsg, ok:false};
  }

  function showModal(data){
    img.src=data.src; text.textContent=data.msg;
    // 控制跳转按钮显示与目标
    if(gotoBtn){
      gotoBtn.style.display = data.ok ? 'inline-block' : 'none';
      gotoBtn.setAttribute('data-target', data.target || '');
    }
    modal.classList.add('show');
    modal.setAttribute('aria-hidden','false');
    // 禁止背景滚动，防止移动端页面缩小或无法关闭
    document.body.style.overflow = 'hidden';
  }
  function hideModal(){
    modal.classList.remove('show');
    modal.setAttribute('aria-hidden','true');
    // 恢复背景滚动
    document.body.style.overflow = '';
  }

  form.addEventListener('submit', function(e){
    e.preventDefault();
    const v=input.value.trim();
    const data=pickContent(v);
    showModal(data);
  });
  closeBtn.addEventListener('click', hideModal);
  if(gotoBtn){
    gotoBtn.addEventListener('click', function(){
      const t=this.getAttribute('data-target');
      if(t){ window.location.href=t; }
    });
  }
  modal.addEventListener('click', function(e){ if(e.target===modal) hideModal(); });
  document.addEventListener('keydown', function(e){ if(e.key==='Escape') hideModal(); });
})();
</script>
<script src="../js/chrome.js" defer></script>
<script src="../js/taskbar.js" defer></script>
</body>
</html>